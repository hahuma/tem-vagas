import{u as F,b as V,w as M}from"./axios-23462d7f.js";import{_ as L}from"./lodash-9f8c5478.js";import{_ as P,b as z,a as J}from"./NextPage-40bb9e0e.js";import{T as R,o as n,c as _,t as o,m as E,S as x,e,d as $,i as C,k as N,a as p,Y as f,Z as G,aa as I,r as U,F as k,f as Y,p as i,h as A}from"./runtime-core.esm-bundler-5fc0a256.js";import{_ as Z}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as H}from"./Modal-20c18eb7.js";const B={__name:"CardButton",props:{id:{type:String,required:!0},description:{type:String,default:()=>"Detalhes"},outlined:{type:Boolean,default:!1}},setup(l){const c=l,m=R(()=>c.outlined?"btn btn-outline border-orange border-3 fs-5 py-0 px-2":"btn btn-primary fs-5 py-0 px-2");return(v,a)=>(n(),_("button",E({type:"button",class:x(m)},v.$attrs),o(l.description),17))}},K={class:"col accordion-item border-0"},Q={class:"card bg-white border-0 shadow-sm h-100 w-100"},W={class:"card-header bg-gray-200 p-1 border-0 fs-5 my-2 mx-3 d-flex flex-row align-items-center justify-content-between"},X={class:"card-body py-2 px-3 col text-truncate"},ee={class:"card-footer border-0 py-2 px-3 d-flex align-items-center justify-content-between"},se={class:"d-flex gap-2"},te={__name:"CardGlobal",props:{id:{type:Number,required:!0},refs:{type:Array,default:()=>["",""]},second:{type:Boolean,default:!1}},emits:["action","secondAction"],setup(l,{emit:c}){const m=a=>{c("action",a)},v=a=>{c("secondAction",a)};return(a,d)=>(n(),_("div",K,[e("div",Q,[e("div",W,[$(a.$slots,"header")]),e("div",X,[$(a.$slots,"body")]),e("div",ee,[$(a.$slots,"footer"),e("div",se,[l.second?(n(),C(B,{key:0,id:l.refs[1],outlined:"",description:"Reajustes",onClick:d[0]||(d[0]=g=>v(l.id))},null,8,["id"])):N("",!0),p(B,{id:l.refs[0],onClick:d[1]||(d[1]=g=>m(l.id))},null,8,["id"])])])])]))}},oe={},ae={class:"card-text mb-1 col text-truncate"};function ne(l,c){return n(),_("p",ae,[$(l.$slots,"default")])}const w=Z(oe,[["render",ne]]),le={class:"page-content"},re={class:"container-fluid"},ie={key:1,class:"h-100 p-4 overflow-overlay page-app"},de={class:"row row-cols-1 row-cols-md-2 row-cols-lg-2 g-4"},ce={class:"row row-cols-1 row-cols-md-2 row-cols-xl-3 row-cols-xxl-4 g-3"},ue=e("b",null,"Título da vaga:",-1),fe=e("b",null,"Cargo:",-1),pe={class:"row"},_e={class:"col-6"},me={class:"col-6"},ve=e("b",null,"Inscrições:",-1),be={class:"text-gray-500"},ye=e("h2",{class:"h4 modal-title"},"Filtro de busca",-1),he={class:"modal-body"},ge={class:"row mb-1"},we=e("label",{class:"form-label pb-1 fs-6 fw-400",for:"city_id"},"Município",-1),xe={class:"d-flex justify-content-between align-items-center"},$e={class:"d-flex flex-column"},Ce={key:1,style:{opacity:"0.5"}},ke={class:"modal-footer border-0"},Te={__name:"JobOfferList",setup(l){const c=F(),m=f(""),v=f([]),a=f(!0),d=f([]),g=f(1),T=f(0),u=f({city_id:"",page_size:50,page_start:1}),S=f({});G(m,r=>{r&&(u.search=r,b())});const D=()=>{u.value=S.value},b=async(r=!1)=>{S.value=u.value,a.value=!0;const{data:t}=await V.get("/job-offers/list",{params:u.value});t.error||(r?d.value.push=t.jobOffers:d.value=t.jobOffers,T.value=t.records,g.value=t.pages),a.value=!1},O=r=>{c.push({path:"/admin/vaga/"+r})};async function q(){u.value.page_start++,b(!0)}const j=L.debounce((r,t)=>{!r||V.get(`/cities/${r}`).then(({data:y})=>v.value=y.cities).catch(y=>console.log(y)).finally(()=>t&&t(!1))},500);return I(async()=>{await b(!1)}),(r,t)=>{const y=U("v-select");return n(),_(k,null,[e("div",le,[e("div",re,[p(P,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=s=>m.value=s),title:"Lista de Vagas",onAction:t[1]||(t[1]=()=>x(c).push("/admin/vaga"))},null,8,["modelValue"]),d.value.length==0&&!a.value?(n(),C(z,{key:0,text:"Nenhuma vaga encontrada"})):(n(),_("div",ie,[e("div",de,[e("div",ce,[(n(!0),_(k,null,Y(d.value,s=>(n(),C(te,{id:s.uuid,key:s.uuid,onAction:t[2]||(t[2]=h=>O(h))},{header:i(()=>[e("span",null," Cadastro: "+o(s.created_date)+" as "+o(s.created_hour),1),e("span",null,o(s.status),1)]),body:i(()=>[p(w,null,{default:i(()=>[ue,e("p",null,o(s.title),1)]),_:2},1024),p(w,null,{default:i(()=>[fe,e("p",null,o(s.occupation),1)]),_:2},1024),p(w,null,{default:i(()=>[e("div",pe,[e("div",_e,"Tipo de contrato: "+o(s.type_job),1),e("div",me,o(s.disabled_person??"PcD")+" "+o(r.young_apprentice??"Jovem Aprendriz"),1)])]),_:2},1024),p(w,null,{default:i(()=>[ve,A(" "+o(s.quantity_subscriptions),1)]),_:2},1024)]),footer:i(()=>[e("span",be,o(s.city),1)]),_:2},1032,["id"]))),128))])])]))])]),p(H,{id:"advanced-search","class-name":"modal-dialog w-100 ms-auto mt-6 me-4 d-flex flex-column"},{default:i(()=>[e("div",{class:"modal-header border-0 pb-0"},[ye,e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close","aria-hidden":"true",onClick:D})]),e("div",he,[e("div",{id:"advanced-search-form",onSubmit:t[5]||(t[5]=M(s=>b(u.value),["prevent"]))},[e("div",ge,[we,p(y,{id:"city_id",class:"style-chooser",label:"name",reduce:s=>s.name,options:v.value,"clear-search-on-select":!0,filterable:!1,clearable:!0,onSearch:x(j),"onOption:selected":t[3]||(t[3]=s=>u.value.city_id=s.id),"onSearch:focus":t[4]||(t[4]=s=>x(j)())},{option:i(({name:s,initials:h})=>[e("div",xe,[e("div",$e,[e("span",null,o(s),1),e("span",null,o(h),1)])])]),"no-options":i(({search:s,searching:h})=>[h?(n(),_(k,{key:0},[A(" Não encontrado "),e("em",null,o(s),1)],64)):(n(),_("em",Ce,"Digite as iniciais do nome"))]),_:1},8,["reduce","options","onSearch"])])],32)]),e("div",ke,[e("button",{type:"submit",form:"advanced-search-form","aria-label":"Close","aria-hidden":"true","data-bs-dismiss":"modal",class:"btn w-100 bg-orange fs-4 py-1 px-4 border-0",onClick:t[6]||(t[6]=s=>b())}," Pesquisar ")])]),_:1}),u.value.page_start<g.value?(n(),C(J,{key:0,onClick:q})):N("",!0)],64)}}};export{Te as default};
