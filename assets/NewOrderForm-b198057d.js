import{v as f,j as v,b as w}from"./axios-23462d7f.js";import{d as P}from"./pinia-a5bbb7e4.js";import{_ as A}from"./ShowErrors-70f32166.js";import{r as E}from"./index-b960e99b.js";import{Y as h,o as n,c as d,w as r,e,S as o,F as k,f as x,t as u,k as y,a as $,U as O,aa as S}from"./runtime-core.esm-bundler-5fc0a256.js";import"./logo-top-2fcfa290.js";import"./_plugin-vue_export-helper-c27b6911.js";const N=P("orderStore",{state:()=>({data:{order:{uuid:"",recepient_id:"",person_id:"",payment_method_id:"BOL",number_installments:1,coupon_code:"",order_date:"",due_date:"",payment_data:"",amount_order:"",amount_discount:"",id_gateway_payment:"",url_billet:"",note:""},creditCard:{},item:{type_plan_id:"",item_plan_id:"",quantity_curriculum:0,quantity_advertising:0,price:0}},plansAdvertising:[],plansBaseCurriculum:[]}),actions:{setItemPlan(m){this.store.data.items[0]=m},hasErrorForm(){let m=[];return this.data.order.payment_method_id===""&&m.push({message:"Informe a forma de pagamento"}),m}}}),M={class:"row"},U={class:"col-6"},F=e("label",{for:"base_curriculum",class:"px-1 me-3 text-uppercase"},"Acesso a Base de Currículos",-1),I=e("label",{for:"advertising",class:"px-1 text-uppercase"},"Anúncios de Vagas",-1),L=e("div",{class:"col-6 text-center"},"SELECIONE UM PLANO",-1),T={class:"row"},j=e("div",{class:"col-6"},[e("p",null,"Cada crédito permite acesso a 01 currículo por até 60 dias.")],-1),R={class:"col-6"},D={class:"table table-sm table-striped table-hover table-bordered"},Y=e("thead",null,[e("tr",null,[e("th"),e("th",null,"Créditos"),e("th",null,"Anúncios grátis"),e("th",{class:"text-end"},"Preço Total")])],-1),z=["value"],G=["value","onClick"],H={class:"text-center"},J={class:"text-center"},K={class:"text-end"},Q={class:"row"},W=e("div",{class:"col-4"},[e("p",null,"Cada crédito permite criar 01 anúncio de vaga no site temvagas.net e nos canais parceiros.")],-1),X={class:"col-8"},Z={class:"table table-sm table-striped table-hover table-bordered border-1"},ee=e("thead",null,[e("tr",null,[e("th"),e("th",null,"Créditos"),e("th",null,"Preço Total")])],-1),te=["value"],ae=["checked"],se={class:"row"},ie={class:"col-6"},oe=e("h2",null,"Forma de Pagamento",-1),le=e("label",{for:"boleto",class:"px-1 me-3 text-uppercase"},"Boleto",-1),ne=e("label",{for:"cartao",class:"px-1 text-uppercase"},"Cartão de Crédito",-1),de={class:"col-6"},re=e("h2",null,"Resumo da Compra",-1),ue={key:0,class:"row"},_e={key:1,class:"row"},ce={class:"col-4"},pe={class:"col-4"},me={class:"d-flex justify-content-between"},ve={key:0},B={__name:"OrderCompany",setup(m){let _=h([]);const c=h(!1),t=N(),p=h("plans"),s=h({type_plan_id:"BC",plan_item_id:""}),b=()=>{s.value.plan_item_id==""?(c.value=!0,_.value=[],_.value.push("Selecione o plano que deseja adquirir")):p.value="payment"},q=l=>{s.value.type_plan_id=="BC"?(t.data.item.type_plan_id=l.type_plan_id,t.data.item.plan_item_id=l.id,t.data.item.quantity_curriculum=l.quantity_curriculum,t.data.item.quantity_advertising=l.quantity_advertising,t.data.item.price=l.price):(t.data.item.quantity_advertising=l.quantity_advertising,t.data.item.price=l.price)},V=async()=>{t.data.order.amount_order=t.data.item.price;const{data:l}=await w.post("/orders/company",{order:t.data.order,item:t.data.item});l.error?(c.value=!0,_.value=l.message):E.push({path:"/admin"})};return(l,i)=>(n(),d(k,null,[r(e("div",null,[e("div",M,[e("div",U,[r(e("input",{"onUpdate:modelValue":i[0]||(i[0]=a=>s.value.type_plan_id=a),id:"base_curriculum",name:"type_plan_id",type:"radio",value:"BC",onClick:i[1]||(i[1]=a=>s.value.plan_id=o(t).plansBaseCurriculum[0].plan_id),checked:""},null,512),[[v,s.value.type_plan_id]]),F,r(e("input",{"onUpdate:modelValue":i[2]||(i[2]=a=>s.value.type_plan_id=a),id:"advertising",name:"type_plan_id",type:"radio",value:"AN"},null,512),[[v,s.value.type_plan_id]]),I]),L]),r(e("div",T,[j,e("div",R,[e("table",D,[Y,e("tbody",null,[(n(!0),d(k,null,x(o(t).plansBaseCurriculum,(a,C)=>(n(),d("tr",{key:C,value:a.id},[e("td",null,[r(e("input",{"onUpdate:modelValue":i[3]||(i[3]=g=>s.value.plan_item_id=g),name:"plan_item_id",type:"radio",value:a.id,onClick:g=>q(a)},null,8,G),[[v,s.value.plan_item_id]])]),e("td",H,u(a.quantity_curriculum),1),e("td",J,u(a.quantity_advertising),1),e("td",K,u(l.vueNumberFormat(a.price)),1)],8,z))),128))])])])],512),[[f,s.value.type_plan_id=="BC"]]),r(e("div",Q,[W,e("div",X,[e("table",Z,[ee,e("tbody",null,[(n(!0),d(k,null,x(o(t).plansAdvertising,(a,C)=>(n(),d("tr",{key:C,value:a.id},[e("td",null,[r(e("input",{"onUpdate:modelValue":i[4]||(i[4]=g=>s.value.plan_item_id=g),name:"plan_item_id",type:"radio",value:"item.id",checked:C==1},null,8,ae),[[v,s.value.plan_item_id]])]),e("td",null,u(a.quantity_advertising),1),e("td",null,u(a.price),1)],8,te))),128))])])])],512),[[f,s.value.type_plan_id=="AN"]]),e("div",null,[e("button",{onClick:b},"Avançar")])],512),[[f,p.value=="plans"]]),r(e("div",se,[e("div",ie,[oe,e("div",null,[r(e("input",{"onUpdate:modelValue":i[5]||(i[5]=a=>o(t).data.order.payment_method_id=a),id:"boleto",name:"payment_method_id",type:"radio",value:"BOL",checked:""},null,512),[[v,o(t).data.order.payment_method_id]]),le,r(e("input",{"onUpdate:modelValue":i[6]||(i[6]=a=>o(t).data.order.payment_method_id=a),id:"cartao",name:"payment_method_id",type:"radio",value:"CCR",disabled:"true"},null,512),[[v,o(t).data.order.payment_method_id]]),ne])]),e("div",de,[re,s.value.type_plan_id=="BC"?(n(),d("div",ue,[e("div",null,[e("p",null,"Crédito para acesso aos currículos: "+u(o(t).data.item.quantity_curriculum),1),e("p",null,"Anúncios grátis: "+u(o(t).data.item.quantity_advertising),1),e("p",null,"Preço Total: "+u(o(t).data.item.price),1)])])):y("",!0),o(t).data.item.type_plan_id=="AN"?(n(),d("div",_e,[e("div",ce,[e("span",null,"Anúncios: "+u(o(t).data.item.quantity_advertising),1)]),e("div",pe,[e("span",null,"Preço Total: "+u(o(t).data.item.price),1)])])):y("",!0)]),e("div",me,[e("button",{onClick:i[7]||(i[7]=a=>p.value="plans")},"Voltar"),e("button",{onClick:V},"Concluir Pedido")])],512),[[f,p.value=="payment"]]),c.value?(n(),d("div",ve,[$(A,{errors:o(_),onClick:i[8]||(i[8]=a=>c.value=!1)},null,8,["errors"])])):y("",!0)],64))}},he={class:"page-content"},ye={class:"container-fluid"},be={class:"row"},Ce={class:"col-xl-8"},ge={class:"card"},fe={class:"card-body"},ke=e("h4",{class:"card-title mb-3"},"Aquisição de Créditos",-1),$e={class:"h-100 p-4 overflow-overlay page-app"},qe={key:0},xe={key:1},Be={key:0},Se={__name:"NewOrderForm",setup(m){const _=h("EMP"),c=h(!1);let t=O([]);const p=N();return S(async()=>{await w.get("/plans/available").then(({data:s})=>{p.plansBaseCurriculum=s.plansBaseCurriculum,p.plansAdvertising=s.plansAdvertising,_.value=s.recipient})}),(s,b)=>(n(),d(k,null,[e("div",he,[e("div",ye,[e("div",be,[e("div",Ce,[e("div",ge,[e("div",fe,[ke,e("div",$e,[e("div",null,[_.value=="EMP"?(n(),d("div",qe,[$(B)])):y("",!0),_.value=="CAN"?(n(),d("div",xe,[$(B)])):y("",!0)])])])])])])])]),c.value?(n(),d("div",Be,[$(A,{errors:o(t),onClick:b[0]||(b[0]=q=>c.value=!1)},null,8,["errors"])])):y("",!0)],64))}};export{Se as default};
