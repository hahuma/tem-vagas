import{h as E,u as R,b as x,f as c,i as f,v as F}from"./axios-23462d7f.js";import{u as D,_ as $}from"./Person-975cfcfc.js";import{d as N}from"./pinia-a5bbb7e4.js";import{u as P}from"./formStore-2556024b.js";import{_ as B}from"./ShowErrors-70f32166.js";import{Y as y,aa as M,ae as T,b as H,o as m,c as p,e,a as V,w as i,S as o,k as u,F as z}from"./runtime-core.esm-bundler-5fc0a256.js";import"./lodash-9f8c5478.js";const A=N("companyStore",{state:()=>({data:{company:{payment_method_id:"",adhesion_term_id:"",business_activity_id:"",person_contact_rh:"",email_rh:"",phone_rh:"",email_billing:"",phone_billing:"",prepaid:!0,disclose_name:!1,employment_agency:!1,charges_registration_fee:!1,withholding_tax:!1,due_day:"",note:"",active:!0}}})}),O={class:"page-content"},j={class:"container-fluid"},J={class:"row"},Y={class:"col-xl-8"},q={class:"card"},G={class:"card-body"},K=e("h4",{class:"card-title mb-3"},"Cadastro de Empresas",-1),L=e("hr",null,null,-1),Q=e("h3",null,"Informações para Recrutamento de Candidatos",-1),W=e("hr",null,null,-1),X={class:"col-6 mb-3"},Z=e("label",{for:"person_contact",class:"form-label"},"Pessoa de contato",-1),ee=["disabled"],ae={class:"col-6 mb-3"},oe=e("label",{for:"email_rh",class:"form-label"},"Email",-1),te=["disabled"],se={class:"col-3 mb-3"},ne=e("label",{for:"phone_rh",class:"form-label"},"Telefone",-1),le=["disabled"],ie={class:"col-6 mb-3"},de={class:"form-check"},re=["disabled"],ce=e("label",{class:"form-check-label",for:"employment_agency"},"É uma Agência de Recrutamento e Seleção",-1),me={class:"col-6 mb-3"},pe={class:"form-check"},_e=["disabled"],ue=e("label",{class:"form-check-label",for:"charges_registration_fee"},"Cobra taxa de inscrição do candidato",-1),he=e("hr",null,null,-1),fe=e("h3",null,"Informações para Faturamento",-1),be=e("hr",null,null,-1),ye={class:"col-6 mb-3"},ge=e("label",{for:"email_billing",class:"form-label"},"Email",-1),ve=["disabled"],ke={class:"col-3 mb-3"},we=e("label",{for:"phone_billing",class:"form-label"},"Telefone",-1),xe=["disabled"],Ve={key:0,class:"col-3 mb-3"},Se={class:"form-check"},Ce=["disabled"],Ie=e("label",{class:"form-check-label",for:"prepaid"},"Pré-Pago",-1),Ue={key:1,class:"col-6 mb-3"},Ee=e("label",{for:"due_day",class:"form-label"},"Dia de vencimento",-1),Re=["disabled"],Fe={class:"col-6 mb-3"},De={class:"form-check"},$e=["disabled"],Ne=e("label",{class:"form-check-label",for:"withholding_tax"},"ISS Retido pela empresa",-1),Pe={key:2,class:"col-6 mb-3"},Be=e("label",{for:"note",class:"form-label"},"Observações",-1),Me=["disabled"],Te={key:3,class:"col-3 mb-3"},He={class:"form-check"},ze=["disabled"],Ae=e("label",{class:"form-check-label",for:"active"},"Ativo",-1),Oe={key:0,class:"d-flex my-4 justify-content-center w-100"},je=["disabled"],Je={key:0},Ze={__name:"CompanyForm",setup(Ye){const S="/companies",h=y(""),b=y(!1),v=y(!1);let d=y([]);const n=P(),l=D(),a=A(),k=E(),w=R(),C=()=>{switch(n.action){case"insert":case"edit":w.push({path:"/admin/empresas"});break}n.editing=!1},I=async()=>{if(U())return;l.data={...l.data,person:{...l.data.person,document:_(l.data.person.document),zip_code:_(l.data.person.zip_code),phone:_(l.data.person.phone),whatsapp:_(l.data.person.whatsapp)}},a.data={...a.data,company:{...a.data.company,phone_rh:_(a.data.company.phone_rh),phone_billing:_(a.data.company.phone_billing)}};const{data:r}=await x.post(S,{person:l.data.person,user:l.data.user,company:a.data.company});r.error?(d.value=r.message,b.value=!0,v.value=!1,n.editing=!0):(n.editing=!1,w.push({path:"/admin/empresas"}))},_=r=>typeof r=="string"?r.replace(/[^0-9]/g,"").replace(/\D/g,""):r,U=()=>(d.value=l.hasErrorForm(),a.data.company.person_contact_rh===""&&d.value.push("Informe o nome da pessoa de contato"),a.data.company.email_billing===""?d.value.push("Informe o email para faturamento"):/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(a.data.company.email_billing)||d.value.push("Informe um email de faturamento válido"),a.data.company.billing===""&&d.value.push("Informe o telefone do setor de faturamento"),a.data.company.email_rh===""?d.value.push("Informe o email do RH"):/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(a.data.company.email_rh)||d.value.push("Informe um email do RH válido"),a.data.company.phone_rh===""&&d.value.push("Informe o telefone do RH"),d.length?(b.value=!0,!0):!1);return M(async()=>{if(!k.params.id)n.action="insert",n.editing=!0;else{n.action="edit",n.editing=!0;const r=await l.searchCompanyByID(k.params.id);a.data.company=r.company}await x.get("/companies/small-selects").then(({data:r})=>{l.miniSelects=r}),h.value=localStorage.getItem("profile")}),T(()=>{l.editing=!1,l.$reset()}),(r,t)=>{const g=H("mask");return m(),p(z,null,[e("div",O,[e("div",j,[e("div",J,[e("div",Y,[e("div",q,[e("div",G,[K,V($,{"type-perfil":"company","type-person":"J"}),L,Q,W,e("div",null,[e("div",X,[Z,i(e("input",{id:"person_contact","onUpdate:modelValue":t[0]||(t[0]=s=>o(a).data.company.person_contact=s),type:"text",autocomplete:"off",class:"form-control border-gray-500",disabled:!o(n).editing},null,8,ee),[[c,o(a).data.company.person_contact]])]),e("div",ae,[oe,i(e("input",{id:"email_rh","onUpdate:modelValue":t[1]||(t[1]=s=>o(a).data.company.email_rh=s),type:"email",autocomplete:"off",class:"form-control border-gray-500",style:{"text-transform":"lowercase"},disabled:!o(n).editing},null,8,te),[[c,o(a).data.company.email_rh]])]),e("div",se,[ne,i(e("input",{id:"phone_rh","onUpdate:modelValue":t[2]||(t[2]=s=>o(a).data.company.phone_rh=s),type:"text",class:"form-control border-gray-500",disabled:!o(n).editing},null,8,le),[[c,o(a).data.company.phone_rh],[g,["(##) ####-####","(##) #####-####"]]])]),e("div",ie,[e("div",de,[i(e("input",{id:"employment_agency","onUpdate:modelValue":t[3]||(t[3]=s=>o(a).data.company.employment_agency=s),class:"form-check-input",type:"checkbox","true-value":"true","false-value":"false",disabled:!o(n).editing},null,8,re),[[f,o(a).data.company.employment_agency]]),ce])]),i(e("div",me,[e("div",pe,[i(e("input",{id:"charges_registration_fee","onUpdate:modelValue":t[4]||(t[4]=s=>o(a).data.company.charges_registration_fee=s),class:"form-check-input",type:"checkbox","true-value":"true","false-value":"false",disabled:!o(n).editing},null,8,_e),[[f,o(a).data.company.charges_registration_fee]]),ue])],512),[[F,o(a).data.company.employment_agency]]),he,fe,be,e("div",ye,[ge,i(e("input",{id:"email_billing","onUpdate:modelValue":t[5]||(t[5]=s=>o(a).data.company.email_billing=s),type:"email",autocomplete:"off",class:"form-control border-gray-500",style:{"text-transform":"lowercase"},disabled:!o(n).editing},null,8,ve),[[c,o(a).data.company.email_billing]])]),e("div",ke,[we,i(e("input",{id:"phone_billing","onUpdate:modelValue":t[6]||(t[6]=s=>o(a).data.company.phone_billing=s),type:"text",class:"form-control border-gray-500",disabled:!o(n).editing},null,8,xe),[[c,o(a).data.company.phone_billing],[g,["(##) ####-####","(##) #####-####"]]])]),h.value=="admin"?(m(),p("div",Ve,[e("div",Se,[i(e("input",{id:"prepaid","onUpdate:modelValue":t[7]||(t[7]=s=>o(a).data.company.prepaid=s),class:"form-check-input",type:"checkbox","true-value":"true",disabled:!o(n).editing,"false-value":"false"},null,8,Ce),[[f,o(a).data.company.prepaid]]),Ie])])):u("",!0),h.value=="admin"?(m(),p("div",Ue,[Ee,i(e("input",{id:"due_day","onUpdate:modelValue":t[8]||(t[8]=s=>o(a).data.company.due_day=s),type:"number",class:"form-control border-gray-500",style:{"text-transform":"lowercase"},disabled:!o(n).editing},null,8,Re),[[c,o(a).data.company.due_day],[g,"##"]])])):u("",!0),e("div",Fe,[e("div",De,[i(e("input",{id:"withholding_tax","onUpdate:modelValue":t[9]||(t[9]=s=>o(a).data.company.withholding_tax=s),class:"form-check-input",type:"checkbox","true-value":"true",disabled:!o(n).editing,"false-value":"false"},null,8,$e),[[f,o(a).data.company.withholding_tax]]),Ne])]),h.value=="admin"?(m(),p("div",Pe,[Be,i(e("input",{id:"note","onUpdate:modelValue":t[10]||(t[10]=s=>o(a).data.company.note=s),type:"text",class:"form-control border-gray-500",disabled:!o(n).editing},null,8,Me),[[c,o(a).data.company.note]])])):u("",!0),h.value=="admin"?(m(),p("div",Te,[e("div",He,[i(e("input",{id:"active","onUpdate:modelValue":t[11]||(t[11]=s=>o(a).data.company.active=s),class:"form-check-input",type:"checkbox","true-value":"true",disabled:!o(n).editing,"false-value":"false"},null,8,ze),[[f,o(a).data.company.active]]),Ae])])):u("",!0)]),o(n).editing?(m(),p("div",Oe,[e("button",{class:"btn btn-outline-gray-800 fs-5 py-1 px-4 border-0 me-2",onClick:C},"Cancelar"),e("button",{type:"submit",disabled:v.value,form:"register-balanco-form",class:"btn btn-warning bg-orange fs-5 py-1 px-4 border-0",onClick:I}," Salvar ",8,je)])):u("",!0)])])])])])]),b.value?(m(),p("div",Je,[V(B,{errors:o(d),onClick:t[12]||(t[12]=s=>b.value=!1)},null,8,["errors"])])):u("",!0)],64)}}};export{Ze as default};
