import{u as y,w as k,f as m,b as x}from"./axios-23462d7f.js";import{_ as S}from"./logo-top-2fcfa290.js";import{_ as E}from"./ShowErrors-70f32166.js";import{Y as d,U as p,aa as I,r as M,o as f,c as _,a as g,e,w as h,S as c,k as V,F as C}from"./runtime-core.esm-bundler-5fc0a256.js";const L=l=>{const n=[],i=l.length;return typeof l!="object"?n.push(l):Object.entries(l).forEach(([,a])=>{n.push({value:a})}),{hasErrorCaptured:i,errorMessageArray:n}},N={class:"wrapper d-flex flex-column align-items-center justify-content-center vh-100 w-100"},j=e("div",{class:"mb-5"},[e("img",{src:S,alt:""})],-1),A={class:"border border-gray-600 bg-white rounded-3",style:{width:"400px"}},B=e("div",{class:"w-100 p-3"},[e("h4",{class:"m-0 w-100 text-center p-0 titulo--2"},"Acesso ao Sistema")],-1),F=["onSubmit"],U={class:"form-group"},q=e("label",{for:"email",class:"form-label text-black"},"Email",-1),O={class:"form-group"},$=e("label",{for:"password",class:"form-label text-black"}," Senha ",-1),D=["disabled"],G={key:0},H={__name:"Login",setup(l){const n=y(),i=d(!1);let o=p([]);const a=d(!1);let r=p({email:"",password:""});const b=s=>(o=[],s.email===""&&o.push({message:"Informe um login"}),s.password===""&&o.push({message:"Informe sua senha de acesso"}),o.length?(a.value=!0,!0):(o.value=[],!1)),v=async()=>{if(b(r))return;i.value=!0;const{data:s}=await x.post("/login",{email:r.email,password:r.password});if(s.error){const{errorMessageArray:t}=L(s.message);o=t,a.value=!0,i.value=!1}else localStorage.setItem("token",s.token),localStorage.setItem("user",s.user),localStorage.setItem("profile",s.profile),localStorage.setItem("account",s.account),n.push({path:"/admin"})};return I(()=>{console.log("LOGIN")}),(s,t)=>{const w=M("router-view");return f(),_(C,null,[g(w),e("div",N,[j,e("div",A,[B,e("form",{class:"form-signin px-3 pb-4 pt-2",onSubmit:k(v,["prevent"])},[e("div",U,[q,h(e("input",{id:"login","onUpdate:modelValue":t[0]||(t[0]=u=>c(r).email=u),type:"text",class:"form-control border-0",placeholder:"Email",required:"",autofocus:""},null,512),[[m,c(r).email]])]),e("div",O,[$,h(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=u=>c(r).password=u),type:"password",class:"form-control border-0",placeholder:"Senha",required:""},null,512),[[m,c(r).password]])]),e("button",{class:"btn w-100 mt-4 mb-0 btn-primary bg-indigo border-0",type:"submit",disabled:i.value}," Login ",8,D)],40,F),a.value?(f(),_("div",G,[g(E,{errors:c(o),onClick:t[2]||(t[2]=u=>a.value=!1)},null,8,["errors"])])):V("",!0)])])],64)}}};export{H as default};
