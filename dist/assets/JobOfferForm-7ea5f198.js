import{u as B,h as A,b as p,f as b,j,i as $,k as L}from"./axios-23462d7f.js";import{_ as O}from"./lodash-9f8c5478.js";import{d as P}from"./pinia-a5bbb7e4.js";import{u as z}from"./formStore-2556024b.js";import{_ as G}from"./ShowErrors-70f32166.js";import{Y as _,aa as H,ae as Q,r as Y,b as K,o as c,c as f,e,w as r,S as o,a as y,p as m,F as v,f as W,k as D,t as u,h as k}from"./runtime-core.esm-bundler-5fc0a256.js";const X=P("jobOfferStore",{state:()=>({data:{jobOffer:{uuid:null,occupation_id:"",requester_id:"",type_job_id:"",type_contract_id:"",way_working_id:"",job_offer_status_id:"",educational_level_id:"",city_id:"",young_apprentice:!1,disabled_person:!1,title:"",description:"",quantity_offer:1,activities:"",mandatory_requisites:"",desirable_requisites:"",work_schedule:"",remuneration:"",benefits:"",note:"",tags:"",active:!1}},smallSelects:[]})}),Z={class:"page-content"},ee={class:"container-fluid"},te={class:"row"},oe={class:"col-xl-8"},se={class:"card"},ae={class:"card-body"},ie=e("h4",{class:"card-title mb-3"},"Cadastro de Vagas",-1),le={class:"col-12 mb-3"},de=e("label",{for:"title",class:"form-label"},"Título da Vaga",-1),ne=["disabled"],re={class:"row col-12 mb-3"},ce=e("label",{class:"form-label",for:"occupation_id"},"Cargo",-1),fe={class:"d-flex justify-content-between align-items-center"},ue={class:"d-flex flex-column"},be={key:1,style:{opacity:"0.5"}},_e={class:"row col-6 mb-3"},pe=e("label",{class:"form-label",for:"city_id"},"Município",-1),me={class:"d-flex justify-content-between align-items-center"},ve={class:"d-flex flex-column"},ge={key:1,style:{opacity:"0.5"}},ye={class:"row col-6 mb-3"},he=e("label",{class:"form-label",for:"requester_id"},"Solicitante",-1),je={class:"d-flex justify-content-between align-items-center"},Oe={class:"d-flex flex-column"},ke={key:1,style:{opacity:"0.5"}},xe={class:"col-3 mb-3"},Ve=e("label",{for:"quantity_offer",class:"form-label"},"Quantidade de vagas",-1),we=["disabled"],Se={class:"mb-3"},qe=["disabled"],Ue=e("label",{for:"job",class:"px-1 me-3"},"Emprego",-1),Ee=["disabled"],Ce=e("label",{for:"Internship",class:"px-1"},"Estágio",-1),$e=["disabled"],De=e("label",{for:"JobOrInternship",class:"px-1"},"Emprego ou Estágio",-1),Ne={class:"mb-3"},Me=["disabled"],Je=e("label",{for:"young_apprentice",class:"form-check-label px-2"},"Jovem Aprendiz",-1),Re={class:"mb-3"},Fe=["disabled"],Ie=e("label",{for:"disabled_person",class:"form-check-label px-2"},"Vaga para PcD",-1),Te={class:"col-6 mb-3"},Be=e("label",{for:"work_schedule",class:"form-label"},"Horário de Trabalho",-1),Ae=["disabled"],Le={class:"col-6 mb-3"},Pe=e("label",{for:"educational_level_id",class:"form-label"},"Grau de Escolaridade",-1),ze=["disabled"],Ge=["value"],He={class:"mb-3"},Qe=e("label",{for:"remuneration",class:"form-label"},"Remuneração",-1),Ye=["disabled"],Ke={class:"mb-3"},We=e("label",{for:"description",class:"form-label"},"Descrição",-1),Xe=["disabled"],Ze={class:"mb-3"},et=e("label",{for:"benefits",class:"form-label"},"Benefícios",-1),tt=["disabled"],ot={class:"mb-3"},st=e("label",{for:"activities",class:"form-label"},"Atividades",-1),at=["disabled"],it={key:0,class:"d-flex my-4 justify-content-center w-100"},lt=["disabled"],dt={key:0},pt={__name:"JobOfferForm",setup(nt){const N="/job-offers",g=_(!1),x=_(!1);let h=_([]);const V=_([]),w=_([]),S=_([]),q=B(),U=A(),i=z(),a=X();_({strikethrough:!0,table:!1});const M=()=>{switch(i.action){case"insert":case"edit":q.push({path:"/admin/vagas"});break}i.editing=!1},J=async()=>{if(R())return;const{data:l}=await p.post(N,{jobOffer:a.data.jobOffer});l.error?(h.value=l.message,g.value=!0,x.value=!1,i.editing=!0):(i.editing=!1,q.push({path:"/admin/vagas"}))},R=()=>h.value.length?(g.value=!0,!0):!1,F=async l=>{const s=await p.get(`/job-offers/${l}`);a.data.jobOffer=s.jobOffer},E=O.debounce((l,s)=>{!l||p.get(`/occupations/search/${l}`).then(({data:d})=>V.value=d.occupations).catch(d=>console.log(d)).finally(()=>s&&s(!1))},750),I=O.debounce((l,s)=>{!l||p.get(`/requesters/search/${l}`).then(({data:d})=>w.value=d.requesters).catch(d=>console.log(d)).finally(()=>s&&s(!1))},750),C=O.debounce((l,s)=>{!l||p.get(`/cities/search/${l}`).then(({data:d})=>S.value=d.cities).catch(d=>console.log(d)).finally(()=>s&&s(!1))},750);return H(async()=>{U.params.id?(i.action="edit",i.editing=!0,F(U.params.id)):(i.action="insert",i.editing=!0),await p.get("/job-offers/small-selects").then(({data:l})=>{a.smallSelects=l})}),Q(()=>{a.editing=!1,a.$reset()}),(l,s)=>{const d=Y("v-select"),T=K("mask");return c(),f(v,null,[e("div",Z,[e("div",ee,[e("div",te,[e("div",oe,[e("div",se,[e("div",ae,[ie,e("div",null,[e("div",le,[de,r(e("input",{id:"title","onUpdate:modelValue":s[0]||(s[0]=t=>o(a).data.jobOffer.title=t),type:"text",class:"form-control border-gray-500",disabled:!o(i).editing},null,8,ne),[[b,o(a).data.jobOffer.title]])]),e("div",re,[ce,y(d,{id:"occupation_id",modelValue:o(a).data.jobOffer.occupation,"onUpdate:modelValue":s[1]||(s[1]=t=>o(a).data.jobOffer.occupation=t),class:"style-chooser",label:"name",reduce:t=>t.name,options:V.value,filterable:!1,disabled:!o(i).editing,onSearch:o(E),"onOption:selected":s[2]||(s[2]=t=>o(a).data.jobOffer.occupation_id=t.id),"onSearch:focus":s[3]||(s[3]=t=>o(E)())},{option:m(({name:t,knowledge_area:n})=>[e("div",fe,[e("div",ue,[e("span",null,u(t),1),e("span",null,u(n),1)])])]),"no-options":m(({search:t,searching:n})=>[n?(c(),f(v,{key:0},[k(" Não encontrado "),e("em",null,u(t),1)],64)):(c(),f("em",be,"Digite as iniciais do nome"))]),_:1},8,["modelValue","reduce","options","disabled","onSearch"])]),e("div",_e,[pe,y(d,{id:"city_id",modelValue:o(a).data.jobOffer.city,"onUpdate:modelValue":s[4]||(s[4]=t=>o(a).data.jobOffer.city=t),class:"style-chooser",label:"name",reduce:t=>t.name,options:S.value,filterable:!1,disabled:!o(i).editing,onSearch:o(C),"onOption:selected":s[5]||(s[5]=t=>o(a).data.jobOffer.city_id=t.id),"onSearch:focus":s[6]||(s[6]=t=>o(C)())},{option:m(({name:t,initials:n})=>[e("div",me,[e("div",ve,[e("span",null,u(t),1),e("span",null,u(n),1)])])]),"no-options":m(({search:t,searching:n})=>[n?(c(),f(v,{key:0},[k(" Não encontrado "),e("em",null,u(t),1)],64)):(c(),f("em",ge,"Digite as iniciais do nome"))]),_:1},8,["modelValue","reduce","options","disabled","onSearch"])]),e("div",ye,[he,y(d,{id:"requester_id",modelValue:o(a).data.jobOffer.requester,"onUpdate:modelValue":s[7]||(s[7]=t=>o(a).data.jobOffer.requester=t),class:"style-chooser",label:"name",reduce:t=>t.name,options:w.value,filterable:!1,disabled:!o(i).editing,onSearch:o(I),"onOption:selected":s[8]||(s[8]=t=>o(a).data.jobOffer.requester_id=t.id),"onSearch:focus":s[9]||(s[9]=t=>l.getRequester())},{option:m(({name:t,short_name:n})=>[e("div",je,[e("div",Oe,[e("span",null,u(t),1),e("span",null,u(n),1)])])]),"no-options":m(({search:t,searching:n})=>[n?(c(),f(v,{key:0},[k(" Não encontrado "),e("em",null,u(t),1)],64)):(c(),f("em",ke,"Digite as iniciais do nome"))]),_:1},8,["modelValue","reduce","options","disabled","onSearch"])]),e("div",xe,[Ve,r(e("input",{id:"quantity_offer","onUpdate:modelValue":s[10]||(s[10]=t=>o(a).data.jobOffer.quantity_offer=t),class:"form-control border-gray-500",disabled:!o(i).editing},null,8,we),[[b,o(a).data.jobOffer.quantity_offer],[T,"##"]])]),e("div",Se,[r(e("input",{id:"job","onUpdate:modelValue":s[11]||(s[11]=t=>o(a).data.jobOffer.type_job_id=t),type:"radio",value:"EM",disabled:!o(i).editing},null,8,qe),[[j,o(a).data.jobOffer.type_job_id]]),Ue,r(e("input",{id:"Internship","onUpdate:modelValue":s[12]||(s[12]=t=>o(a).data.jobOffer.type_job_id=t),type:"radio",value:"ES",disabled:!o(i).editing},null,8,Ee),[[j,o(a).data.jobOffer.type_job_id]]),Ce,r(e("input",{id:"JobOrInternship","onUpdate:modelValue":s[13]||(s[13]=t=>o(a).data.jobOffer.type_job_id=t),type:"radio",value:"EE",disabled:!o(i).editing},null,8,$e),[[j,o(a).data.jobOffer.type_job_id]]),De]),e("div",Ne,[r(e("input",{id:"young_apprentice","onUpdate:modelValue":s[14]||(s[14]=t=>o(a).data.jobOffer.young_apprentice=t),class:"form-check-input",type:"checkbox","true-value":"true","false-value":"false",disabled:!o(i).editing},null,8,Me),[[$,o(a).data.jobOffer.young_apprentice]]),Je]),e("div",Re,[r(e("input",{id:"disabled_person","onUpdate:modelValue":s[15]||(s[15]=t=>o(a).data.jobOffer.disabled_person=t),class:"form-check-input",type:"checkbox","true-value":"true","false-value":"false",disabled:!o(i).editing},null,8,Fe),[[$,o(a).data.jobOffer.disabled_person]]),Ie]),e("div",Te,[Be,r(e("input",{id:"work_schedule","onUpdate:modelValue":s[16]||(s[16]=t=>o(a).data.jobOffer.work_schedule=t),type:"text",class:"form-control border-gray-500",disabled:!o(i).editing},null,8,Ae),[[b,o(a).data.jobOffer.work_schedule]])]),e("div",Le,[Pe,r(e("select",{id:"store.data.jobOffer.educational_level_id","onUpdate:modelValue":s[17]||(s[17]=t=>o(a).data.jobOffer.educational_level_id=t),class:"form-select border-gray-500",disabled:!o(i).editing},[(c(!0),f(v,null,W(o(a).smallSelects.educationalLevels,(t,n)=>(c(),f("option",{key:n,value:t.id},u(t.name),9,Ge))),128))],8,ze),[[L,o(a).data.jobOffer.educational_level_id]])]),e("div",He,[Qe,r(e("textarea",{id:"remuneration","onUpdate:modelValue":s[18]||(s[18]=t=>o(a).data.jobOffer.remuneration=t),rows:"3",cols:"80",class:"form-control border-gray-500",disabled:!o(i).editing},null,8,Ye),[[b,o(a).data.jobOffer.remuneration]])]),e("div",Ke,[We,r(e("textarea",{id:"description","onUpdate:modelValue":s[19]||(s[19]=t=>o(a).data.jobOffer.description=t),rows:"10",cols:"80",class:"form-control border-gray-500",disabled:!o(i).editing},null,8,Xe),[[b,o(a).data.jobOffer.description]])]),e("div",Ze,[et,r(e("textarea",{id:"benefits","onUpdate:modelValue":s[20]||(s[20]=t=>o(a).data.jobOffer.benefits=t),type:"text",rows:"10",cols:"80",class:"form-control border-gray-500",disabled:!o(i).editing},null,8,tt),[[b,o(a).data.jobOffer.benefits]])]),e("div",ot,[st,r(e("textarea",{id:"activities","onUpdate:modelValue":s[21]||(s[21]=t=>o(a).data.jobOffer.activities=t),rows:"10",cols:"80",class:"form-control border-gray-500",disabled:!o(i).editing},null,8,at),[[b,o(a).data.jobOffer.activities]])])]),o(i).editing?(c(),f("div",it,[e("button",{class:"btn btn-outline-gray-800 fs-5 py-1 px-4 border-0 me-2",onClick:M},"Cancelar"),e("button",{type:"submit",disabled:x.value,form:"register-balanco-form",class:"btn btn-warning bg-orange fs-5 py-1 px-4 border-0",onClick:J}," Salvar ",8,lt)])):D("",!0)])])])])])]),g.value?(c(),f("div",dt,[y(G,{errors:o(h),onClick:s[22]||(s[22]=t=>g.value=!1)},null,8,["errors"])])):D("",!0)],64)}}};export{pt as default};
