import{b,j as V,f as d,v as N}from"./axios-23462d7f.js";import{_ as $}from"./lodash-9f8c5478.js";import{d as B}from"./pinia-a5bbb7e4.js";import{u as D}from"./formStore-2556024b.js";import{_ as E}from"./ShowErrors-70f32166.js";import{Y as g,T as I,r as j,b as M,o as m,c as u,e as t,S as e,w as i,k as _,t as y,a as x,p as C,F as U,h as T}from"./runtime-core.esm-bundler-5fc0a256.js";const O=B("personStore",{state:()=>({data:{person:{uuid:"",type_person_id:"J",affiliate_id:"",register_status_id:"",city_id:"",name:"",short_name:"",document_number:"",zip_code:"",street:"",number_street:"",street_complement:"",district:"",latitude:"",longitude:"",url_photo:"",email:"",phone:"",whatsapp:"",telegram:"",instagram:"",facebook:""},user:{email:"",password:""}},file:""}),actions:{async searchCompanyByID(r){const{data:l}=await b.get(`/companies/${r}`);return this.data.person=l.person,this.data.user=l.user,l},async searchAffiliateByID(r){const{data:l}=await b.get(`/affiliates/${r}`);return this.data.person=l.person,this.data.user=l.user,l},async searchCandidateByID(r){const{data:l}=await b.get(`/candidates/${r}`);return this.data.person=l.person,l},hasErrorForm(){let r=[];return this.data.person.type_person_id===""&&r.push("Informe o Tipo de Pessoa, Jurídica ou Física"),this.data.person.type_person_id==="F"?(this.data.person.short_name="",this.data.person.document_number===""&&r.push("Faltou informar o CPF"),this.data.person.name===""&&r.push("Faltou informar o Nome")):(this.data.person.document_number===""&&r.push("Faltou informar o CNPJ"),this.data.person.name===""&&r.push("Faltou informar a Razão Social"),this.data.person.short_name===""&&r.push("Faltou informar o nome de Fantasia")),this.data.person.street===""&&r.push("Faltou informar o logradouro"),this.data.person.street_number===""&&r.push("Faltou informar o número do logradouro"),this.data.person.district===""&&r.push("Faltou informar o bairro ou localidade"),this.data.person.zip_code===""&&r.push("Faltou informar o CEP"),this.data.person.city_id===""&&r.push("Faltou informar o Município"),this.data.person.email===""&&r.value.push("Informe o email de contato"),/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(this.data.person.email)||r.value.push("Informe um email de contato válido"),r}}}),R=r=>typeof r=="string"?r.replace(/[^0-9]/g,"").replace(/\D/g,""):r,q={class:"row"},A={key:0,class:"col-4 mb-3"},L=["disabled"],W=t("label",{for:"pessoa_juridica",class:"form-label"},"Pessoa Jurídica",-1),Y=["disabled"],Z=t("label",{for:"pessoa_fisica",class:"form-label"},"Pessoa Física",-1),G={class:"row"},H={class:"col-6 mb-3"},K={for:"document_number",class:"form-label"},Q=["disabled"],X=["disabled"],ee={class:"col mt-4 fs-6 mb-3"},te=t("i",{class:"bi bi-search"},"Buscar CNPJ ",-1),oe=[te],se={class:"col-9 mb-3"},ae={for:"name",class:"form-label"},re=["disabled"],ne={class:"col-6 mb-3"},ie=t("label",{for:"short_name",class:"form-label"},"Fantasia",-1),de=["disabled"],le={class:"col-9 mb-3"},pe=t("label",{for:"email",class:"form-label"},"Email",-1),ce=["disabled"],me={key:0,class:"col-6 mb-3"},ue=t("label",{for:"password",class:"form-label"},"Senha",-1),_e={class:"col-3 mb-3"},be=t("label",{for:"phone",class:"form-label"},"Telefone",-1),fe=["disabled"],ye={key:1,class:"col-3 mb-3"},he=t("label",{for:"whatsapp",class:"form-label"},"Whatsapp",-1),ge=["disabled"],ve={key:2,class:"col-3 mb-3"},we=t("label",{for:"instagram",class:"form-label"},"Instagram",-1),ke=["disabled"],Pe={key:3,class:"col-3 mb-3"},Fe=t("label",{for:"facebook",class:"form-label"},"Facebook",-1),Ve=["disabled"],xe={class:"row mt-3 mb-3"},Ce={class:"col-3"},Ue=t("label",{for:"zip",class:"form-label"},"CEP ",-1),Se=["disabled"],Je={class:"col mt-4 fs-6 mb-3"},ze=t("i",{class:"bi bi-search"},"Buscar CEP ",-1),Ne=[ze],$e={class:"row"},Be={class:"col-9 mb-3"},De=t("label",{for:"street",class:"form-label"},"Logradouro ",-1),Ee=["disabled"],Ie={class:"col-2 mb-3"},je=t("label",{for:"number",class:"form-label"},"Número ",-1),Me=["disabled"],Te={class:"row"},Oe={class:"col-9 mb-3"},Re=t("label",{for:"street_complement",class:"form-label"},"Complemento",-1),qe=["disabled"],Ae={class:"row"},Le={class:"col-9 mb-3"},We=t("label",{for:"district",class:"form-label"},"Bairro",-1),Ye=["disabled"],Ze={class:"row col-6 mb-3"},Ge=t("label",{class:"form-label",for:"city_id"},"Município",-1),He={class:"d-flex justify-content-between align-items-center"},Ke={class:"d-flex flex-column"},Qe={key:1,style:{opacity:"0.5"}},Xe={key:0},nt={__name:"Person",props:{typePerfil:{required:!0,type:String},typePerson:{default:"",type:String}},setup(r){const l=r;let v=g("");const h=g(!1),k=g([]),n=D(),o=O();o.data.person.type_person_id=g(l.typePerson);const S=I(()=>n.action==="insert"&&l.typePerson===""&&l.typePerfil!=="candidate"&&localStorage.getItem("profile")==="admin"),P=$.debounce((p,s)=>{s(!0),b.get(`/cities/${p}`).then(({data:c})=>k.value=c.cities).catch(c=>console.log(c)).finally(()=>s&&s(!1))},500),J=async p=>{if(p){const s=R(p),{data:c}=await b.get(`/cnpj/${s}`);c.error?(v.value=c.message,h.value=!0):(o.data.person.document_number=c.cnpj,o.data.person.name=c.razao_social,o.data.person.short_name=c.fantasia,o.data.person.email=c.email,o.data.person.phone=c.telefone,F(c))}},z=async p=>{const{data:s}=await b.get(`/zip-code/${p}`);s.error?(v.value=s.message,h.value=!0):F(s)},F=p=>{o.data.person.zip_code=p.cep,o.data.person.street=p.logradouro,o.data.person.street_number=p.numero,o.data.person.street_complement=p.complemento_endereco,o.data.person.district=p.bairro,o.data.person.city_id=p.municipio_id};return(p,s)=>{const c=j("v-select"),f=M("mask");return m(),u(U,null,[t("div",null,[t("div",q,[e(S)?(m(),u("div",A,[i(t("input",{id:"pessoa_juridica","onUpdate:modelValue":s[0]||(s[0]=a=>e(o).data.person.type_person_id=a),type:"radio",value:"J",disabled:!e(n).editing},null,8,L),[[V,e(o).data.person.type_person_id]]),W,i(t("input",{id:"pessoa_fisica","onUpdate:modelValue":s[1]||(s[1]=a=>e(o).data.person.type_person_id=a),type:"radio",value:"F",disabled:!e(n).editing},null,8,Y),[[V,e(o).data.person.type_person_id]]),Z])):_("",!0)]),t("div",G,[t("div",H,[t("label",K,y(e(o).data.person.type_person_id=="J"?"CNPJ":"CPF"),1),e(o).data.person.type_person_id=="J"?i((m(),u("input",{key:0,id:"document_number","onUpdate:modelValue":s[2]||(s[2]=a=>e(o).data.person.document_number=a),type:"text",class:"form-control border-gray-500",disabled:!e(n).editing},null,8,Q)),[[d,e(o).data.person.document_number],[f,"##.###.###/####-##"]]):_("",!0),e(o).data.person.type_person_id!="J"?i((m(),u("input",{key:1,id:"document_number","onUpdate:modelValue":s[3]||(s[3]=a=>e(o).data.person.document_number=a),type:"text",class:"form-control border-gray-500",disabled:!e(n).editing},null,8,X)),[[d,e(o).data.person.document_number],[f,"###.###.###-##"]]):_("",!0)]),t("div",ee,[e(n).action=="insert"&&e(n).editing&&e(o).data.person.type_person_id=="J"?(m(),u("button",{key:0,"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Obtém cadastro da empresa",class:"me-1",onClick:s[4]||(s[4]=a=>J(e(o).data.person.document_number))},oe)):_("",!0)])]),t("div",se,[t("label",ae,y(e(o).data.person.type_person_id=="F"?"Nome":"Razão Social"),1),i(t("input",{id:"name","onUpdate:modelValue":s[5]||(s[5]=a=>e(o).data.person.name=a),type:"text",class:"form-control border-gray-500",disabled:!e(n).editing},null,8,re),[[d,e(o).data.person.name]])]),t("div",ne,[i(t("div",null,[ie,i(t("input",{id:"short_name","onUpdate:modelValue":s[6]||(s[6]=a=>e(o).data.person.short_name=a),type:"text",class:"form-control border-gray-500",disabled:!e(n).editing},null,8,de),[[d,e(o).data.person.short_name]])],512),[[N,e(o).data.person.type_person_id=="J"]])]),t("div",le,[pe,i(t("input",{id:"email","onUpdate:modelValue":s[7]||(s[7]=a=>e(o).data.person.email=a),type:"email",style:{"text-transform":"lowercase"},class:"form-control border-gray-500",disabled:!e(n).editing},null,8,ce),[[d,e(o).data.person.email]])]),e(n).action=="insert"?(m(),u("div",me,[ue,i(t("input",{id:"password","onUpdate:modelValue":s[8]||(s[8]=a=>e(o).data.user.password=a),type:"password",style:{"text-transform":"lowercase"},class:"form-control border-gray-500"},null,512),[[d,e(o).data.user.password]])])):_("",!0),t("div",_e,[be,i(t("input",{id:"phone","onUpdate:modelValue":s[9]||(s[9]=a=>e(o).data.person.phone=a),type:"text",class:"form-control border-gray-500",disabled:!e(n).editing},null,8,fe),[[d,e(o).data.person.phone],[f,["(##) ####-####","(##) #####-####"]]])]),r.typePerfil=="candidate"?(m(),u("div",ye,[he,i(t("input",{id:"whatsapp","onUpdate:modelValue":s[10]||(s[10]=a=>e(o).data.person.whatsapp=a),type:"text",class:"form-control border-gray-500",disabled:!e(n).editing},null,8,ge),[[d,e(o).data.person.whatsapp],[f,["(##) ####-####","(##) #####-####"]]])])):_("",!0),r.typePerfil=="candidate"?(m(),u("div",ve,[we,i(t("input",{id:"instagram","onUpdate:modelValue":s[11]||(s[11]=a=>e(o).data.person.instagram=a),type:"text",class:"form-control border-gray-500",disabled:!e(n).editing},null,8,ke),[[d,e(o).data.person.instagram]])])):_("",!0),r.typePerfil=="candidate"?(m(),u("div",Pe,[Fe,i(t("input",{id:"facebook","onUpdate:modelValue":s[12]||(s[12]=a=>e(o).data.person.facebook=a),type:"text",class:"form-control border-gray-500",disabled:!e(n).editing},null,8,Ve),[[d,e(o).data.person.facebook]])])):_("",!0)]),t("div",null,[t("div",xe,[t("div",Ce,[Ue,i(t("input",{id:"zip","onUpdate:modelValue":s[13]||(s[13]=a=>e(o).data.person.zip_code=a),class:"form-control border-gray-500",type:"text",disabled:!e(n).editing},null,8,Se),[[d,e(o).data.person.zip_code],[f,"##.###-###"]])]),t("div",Je,[e(n).editing?(m(),u("button",{key:0,"data-bs-toggle":"tooltip","data-bs-placement":"top",title:"Obtém endereço a partir do CEP",class:"me-1",onClick:s[14]||(s[14]=a=>z(e(o).data.person.zip_code))},Ne)):_("",!0)])]),t("div",$e,[t("div",Be,[De,i(t("input",{id:"street","onUpdate:modelValue":s[15]||(s[15]=a=>e(o).data.person.street=a),type:"text",class:"form-control border-gray-500",disabled:!e(n).editing},null,8,Ee),[[d,e(o).data.person.street]])]),t("div",Ie,[je,i(t("input",{id:"number","onUpdate:modelValue":s[16]||(s[16]=a=>e(o).data.person.street_number=a),type:"text",class:"form-control border-gray-500",disabled:!e(n).editing},null,8,Me),[[d,e(o).data.person.street_number]])])]),t("div",Te,[t("div",Oe,[Re,i(t("input",{id:"street_complement","onUpdate:modelValue":s[17]||(s[17]=a=>e(o).data.person.street_complement=a),type:"text",class:"form-control border-gray-500",disabled:!e(n).editing},null,8,qe),[[d,e(o).data.person.street_complement]])])]),t("div",Ae,[t("div",Le,[We,i(t("input",{id:"district","onUpdate:modelValue":s[18]||(s[18]=a=>e(o).data.person.district=a),type:"text",class:"form-control border-gray-500",disabled:!e(n).editing},null,8,Ye),[[d,e(o).data.person.district]])])]),t("div",Ze,[Ge,x(c,{id:"city_id",modelValue:e(o).data.person.city,"onUpdate:modelValue":s[19]||(s[19]=a=>e(o).data.person.city=a),class:"style-chooser",label:"name",reduce:a=>a.name,options:k.value,filterable:!1,disabled:!e(n).editing,onSearch:e(P),"onOption:selected":s[20]||(s[20]=a=>e(o).data.person.city_id=a.id),"onSearch:focus":s[21]||(s[21]=a=>e(P)())},{option:C(({name:a,initials:w})=>[t("div",He,[t("div",Ke,[t("span",null,y(a),1),t("span",null,y(w),1)])])]),"no-options":C(({search:a,searching:w})=>[w?(m(),u(U,{key:0},[T(" Não encontrado "),t("em",null,y(a),1)],64)):(m(),u("em",Qe,"Digite as iniciais do nome"))]),_:1},8,["modelValue","reduce","options","disabled","onSearch"])])]),h.value?(m(),u("div",Xe,[x(E,{errors:e(v),onClick:s[22]||(s[22]=a=>h.value=!1)},null,8,["errors"])])):_("",!0)],64)}}};export{nt as _,O as u};
