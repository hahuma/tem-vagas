import{b as k,i as M,v as D,k as x}from"./axios-23462d7f.js";import{_ as J}from"./lodash-9f8c5478.js";import{r as Y}from"./index-b960e99b.js";import{_ as U}from"./Modal-20c18eb7.js";import{_ as K}from"./ShowErrors-70f32166.js";import{_ as Q}from"./PreviewCurriculumCompany-e20a1529.js";import{Y as d,aa as X,r as Z,o,c as i,e,a as C,p as f,S as r,w as _,t as n,q as R,k as N,F as v,f as p,h as q,i as ee}from"./runtime-core.esm-bundler-5fc0a256.js";import"./logo-top-2fcfa290.js";import"./_plugin-vue_export-helper-c27b6911.js";const se={class:"page-content"},te={class:"container-fluid"},ae={class:"row"},le={class:"col-xl-12"},oe={class:"card"},ie={class:"card-body"},ce=e("h4",null,"SELEÇÃO DE CURRÍCULOS",-1),ne={class:"row"},de={class:"col-6 mb-1"},re=e("label",{class:"form-label pb-1 fs-6 fw-400",for:"occupation_id"},"Cargo",-1),ue={class:"d-flex justify-content-between align-items-center"},_e={class:"d-flex flex-column"},ve={key:1,style:{opacity:"0.5"}},me={class:"form-check"},pe=["disabled"],be={class:"form-check-label",for:"recently_registered"},he={class:"col-6 mb-1"},fe=e("label",{class:"form-label pb-1 fs-6 fw-400",for:"city_id"}," Município da vaga ",-1),ye={class:"row"},ge={class:"col-6"},ke={class:"col-6"},xe={key:1,style:{opacity:"0.5"}},Ce={class:"form-check"},Se=["disabled"],we=e("label",{class:"form-check-label",for:"search_region"}," Buscar também currículos próximo ao município ",-1),$e={class:"my-4"},Ne={id:"acquireCurriculum",class:"nav nav-tabs"},Ve=e("a",{href:"#tab_search",class:"active","data-bs-toggle":"tab"},"Currículos Encontrados",-1),Ee=[Ve],Oe=e("a",{href:"#tab_selected",class:"","data-bs-toggle":"tab"},"Currículos Selecionados",-1),De=[Oe],Ue={key:0,class:"ms-auto"},qe=e("button",{type:"button",class:"btn-gray-800 m-0","data-bs-toggle":"modal","data-bs-target":"#advanced-search"},[q(" Filtrar "),e("i",{class:"bi bi-filter m-0"})],-1),Ae=[qe],je={class:"tab-content"},Be={class:"table table-sm table-striped table-hover table-bordered"},Fe=e("thead",null,[e("tr",null,[e("th",{class:"p-1"},"Nome"),e("th",{class:"p-1"},"Idade"),e("th",{class:"p-1"},"Escore"),e("th",{class:"p-1"},"Cargos de interesse"),e("th",{class:"p-1"},"Ação")])],-1),Ie=["value"],Le={class:"p-0"},Me={class:"p-0"},Je={class:"p-0"},Re={class:"text-truncate p-0"},Te={class:"p-0",align:"center"},ze=["onClick"],Pe=e("i",{class:"bi bi-list"},null,-1),Ge=[Pe],He={class:"table table-sm table-striped table-hover table-bordered"},We=e("thead",null,[e("tr",null,[e("th",null,"Nome"),e("th",null,"Idade"),e("th",null,"Escore"),e("th",null,"Cargos de interesse"),e("th",null,"Ação")])],-1),Ye={class:"text-truncate"},Ke=["onClick"],Qe=e("i",{class:"bi bi-recycle"},null,-1),Xe=[Qe],Ze=["disabled"],es={class:"modal-header row d-flex justify-content-between border-bottom border-2 bg-gray-200 py-2"},ss={class:"col-8"},ts={class:"mb-0 text-bold text-uppercase"},as={class:"col-4 text-end"},ls={class:"mb-0 text-bold text-uppercase"},os={class:"modal-body modal-dialog-scrollable"},is={class:"modal-footer row d-flex justify-content-between border-top border-2"},cs={key:0,class:"col-12"},ns={class:"w-100 d-flex align-items-center justify-content-between py-1 px-4"},ds=e("button",{class:"btn btn-secondary btn-sm m-0 fs-6 border-gray-500 text-uppercase","data-bs-dismiss":"modal","aria-label":"Close","aria-hidden":"true"}," Voltar ",-1),rs=e("div",{class:"modal-header border-0"},[e("h4",null,"Deseja retirar este currículo?"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close","aria-hidden":"true"})],-1),us={class:"modal-body"},_s={class:"modal-footer border-0"},vs={class:"modal-header border-0 pb-0"},ms=e("h2",{class:"h4 modal-title"},"Filtro de busca",-1),ps={class:"col"},bs=e("label",{for:"distante_range_id",class:"form-label"}," Distância da residência ",-1),hs=["value"],fs={class:"col"},ys=e("label",{for:"time_experience",class:"form-label"}," Experiência no cargo ",-1),gs=["value"],ks={class:"col"},xs=e("label",{for:"age",class:"form-label"}," Faixa etária ",-1),Cs=["value"],Ss={class:"col"},ws=e("label",{for:"educational_level_id",class:"form-label"}," Grau de Escolaridade ",-1),$s=["value"],Ns={class:"col"},Vs=e("label",{for:"type_license_drive_id",class:"form-label"}," Categoria CNH ",-1),Es=["value"],Os={class:"col"},Ds=e("label",{for:"type_vehicle_id",class:"form-label"}," Deve possuir veículo ",-1),Us=["value"],qs={class:"modal-footer border-0"},As={key:0},Ps={__name:"SelectionCurriculum",setup(js){const V=d([]),y=d("curriculum_founded"),T=d(0),S=d(0);d(0);const w=d(null),m=d({}),A=d([]),g=d([]);let b=d([]),h=d({}),E=d([]);const $=d(!1),a=d({search:"",city_id:"",age_range:"",search_region:!1,occupation_id:"",type_vehicle_id:"",last_date_search:"",distante_range_id:"",recently_registered:!1,educational_level_id:"",type_license_drive_id:"",page_size:9999,page_start:1}),j=JSON.parse(JSON.stringify(a)),B=l=>{y.value=l},F=async(l,{stateAttribute:t,optionAttribute:u})=>{a.value[t]=l[u],await O()},O=async()=>{a.value.occupation_id||($.value=!0,E.value.push("Informe o cargo que pretende pesquisar os currículos")),a.value.city_id||($.value=!0,E.value.push("Informe o município da vaga")),j.value=JSON.parse(JSON.stringify(a));const{data:l}=await k.get("/curriculum/search",{params:a.value,curriculumSelected:b.value});l.error||(g.value=l.curriculum,T.value=l.records)},z=(l,t)=>{l.value=l,w.value=t},P=(l,t)=>{b.value.push(l),g.value[t].display=!1,S.value--},G=()=>{if(w.value!==null){b.value.splice(w,1);let l=g.value.findIndex(t=>t.uuid===m.uuid);l>=0?g.value[l].display=!0:g.value.push(m),S.value++}},H=async()=>{const{data:l}=await k.post("/curriculum/store",{acquired:b.value,occupation_id:a.value.occupation_id});l.error?($.value=!0,E.value=l.message):(b={},Y.push({path:"/admin"}))},I=J.debounce((l,t)=>{!l||k.get(`/occupations/search/${l}`).then(({data:u})=>A.value=u.occupations).catch(u=>console.log(u)).finally(()=>t&&t(!1))},1e3),L=J.debounce((l,t)=>{!l||k.get(`/cities/${l}`).then(({data:u})=>V.value=u.cities).catch(u=>console.log(u)).finally(()=>t&&t(!1))},1e3);return X(async()=>{await k.get("/curriculum/small-selects").then(({data:t})=>{h.value=t});const{data:l}=await k.get("/companies/setup-search-curriculum");a.value.last_date_search=l.company.last_date_search,a.value.city_id=l.company.city_id,S.value=l.company.credits,V.value.push({id:l.company.city_id,name:l.company.city})}),(l,t)=>{const u=Z("v-select");return o(),i(v,null,[e("div",se,[e("div",te,[e("div",ae,[e("div",le,[e("div",oe,[e("div",ie,[ce,e("div",ne,[e("div",de,[re,C(u,{id:"occupation_id",class:"style-chooser",label:"name",reduce:s=>s.name,options:A.value,filterable:!1,onSearch:r(I),"onOption:selected":t[0]||(t[0]=s=>F(s,{stateAttribute:"occupation_id",optionAttribute:"id"})),"onSearch:focus":t[1]||(t[1]=s=>r(I)())},{option:f(({name:s,area:c})=>[e("div",ue,[e("div",_e,[e("span",null,n(s),1),e("span",null,n(c),1)])])]),"no-options":f(({search:s,searching:c})=>[c?(o(),i("em",ve,"Digite as iniciais do cargo")):(o(),i(v,{key:0},[q(" Não encontrado "),e("em",null,n(s),1)],64))]),_:1},8,["reduce","options","onSearch"]),e("div",null,[e("div",me,[_(e("input",{id:"recently_registered","onUpdate:modelValue":t[2]||(t[2]=s=>a.value.recently_registered=s),class:"form-check-input",type:"checkbox","true-value":"true","false-value":"false",disabled:!a.value.occupation_id||!a.value.city_id,onClick:O},null,8,pe),[[M,a.value.recently_registered]]),e("label",be," Buscar apenas candidatos cadastrados após "+n(a.value.last_date_search),1)])])]),e("div",he,[e("div",null,[fe,C(u,{id:"city_id",class:"style-chooser",label:"name",value:V.value,reduce:s=>s.name,options:V.value,filterable:!1,onSearch:r(L),"onSearch:focus":r(L),"onOption:selected":t[3]||(t[3]=s=>F(s,{stateAttribute:"city_id",optionAttribute:"id"}))},{option:f(({name:s,initials:c})=>[e("div",ye,[e("div",ge,[e("span",null,n(s),1)]),e("div",ke,[e("span",null,n(c),1)])])]),"no-options":f(({search:s,searching:c})=>[c?(o(),i(v,{key:0},[q(" Não encontrado "),e("em",null,n(s),1)],64)):(o(),i("em",xe,"Digite as iniciais do município"))]),_:1},8,["value","reduce","options","onSearch","onSearch:focus"])]),e("div",null,[e("div",Ce,[_(e("input",{id:"search_region","onUpdate:modelValue":t[4]||(t[4]=s=>a.value.search_region=s),class:"form-check-input",type:"checkbox","true-value":"true","false-value":"false",disabled:!a.value.occupation_id||!a.value.city_id,onClick:O},null,8,Se),[[M,a.value.search_region]]),we])])])]),e("div",$e,[e("ul",Ne,[e("li",{class:R(["nav-item p-2 bg-gray-200 cursor-pointer",{"bg-gray-800 text-white":y.value==="curriculum_founded"}]),onClick:t[5]||(t[5]=s=>B("curriculum_founded"))},Ee,2),e("li",{class:R(["nav-item p-2 bg-gray-200 cursor-pointer",{"bg-gray-800 text-white":y.value==="curriculum_selected"}]),onClick:t[6]||(t[6]=s=>B("curriculum_selected"))},De,2),y.value==="curriculum_founded"?(o(),i("li",Ue,Ae)):N("",!0)])]),e("div",je,[_(e("div",null,[e("table",Be,[Fe,e("tbody",null,[(o(!0),i(v,null,p(g.value,(s,c)=>_((o(),i("tr",{key:c,value:s.uuid},[e("td",Le,n(s.short_name),1),e("td",Me,n(s.age),1),e("td",Je,n(s.score),1),e("td",Re,n(s.occupations_interest),1),e("td",Te,[e("button",{class:"m-0 h-2 w-4 p-0","data-bs-toggle":"modal","data-bs-target":"#show-detail",onClick:W=>(m.value=s,w.value=c)},Ge,8,ze)])],8,Ie)),[[D,s.display]])),128))])])],512),[[D,y.value==="curriculum_founded"]]),_(e("div",null,[e("table",He,[We,e("tbody",null,[(o(!0),i(v,null,p(r(b),(s,c)=>(o(),i("tr",{key:s.uuid},[e("td",null,n(s.name),1),e("td",null,n(s.age),1),e("td",null,n(s.score),1),e("td",Ye,n(s.occupations_interest),1),e("td",null,[e("button",{"data-bs-toggle":"modal","data-bs-target":"#confirm-remove-selected",onClick:W=>z(s,c)},Xe,8,Ke)])]))),128))])]),e("div",null,[e("button",{disabled:r(b).length===0,onClick:H},"Concluir",8,Ze)])],512),[[D,y.value==="curriculum_selected"]])])])])])])])]),C(U,{id:"show-detail"},{default:f(()=>[e("div",es,[e("div",ss,[e("h4",ts,n(m.value.name),1)]),e("div",as,[e("h4",ls,"Score: "+n(m.value.score),1)])]),e("div",os,[Object.keys(m.value)?(o(),ee(Q,{key:0,uuid:m.value.uuid},null,8,["uuid"])):N("",!0)]),e("div",is,[S.value===0?(o(),i("div",cs,"Para selecionar este currículo é necessário adquirir créditos.")):N("",!0),e("div",ns,[ds,S.value>0?(o(),i("button",{key:0,class:"btn btn-primary btn-sm m-0 fs-6 border-gray-500 text-uppercase","data-bs-dismiss":"modal","aria-label":"Close","aria-hidden":"false",onClick:t[7]||(t[7]=s=>P(m.value,w.value))}," Selecionar ")):N("",!0)])])]),_:1}),C(U,{id:"confirm-remove-selected"},{default:f(()=>[rs,e("div",us,[e("h4",null,n(m.value.name)+"?",1)]),e("div",_s,[e("button",{class:"btn btn-primary-outline fs-5 py-1 px-4 border-gray-500","data-bs-dismiss":"modal","aria-label":"Close","aria-hidden":"true",onClick:t[8]||(t[8]=s=>m.value=null)}," Não "),e("button",{type:"submit",class:"btn btn-primary gradient-orange fs-5 py-1 px-4 border-0","data-bs-dismiss":"modal","aria-label":"Close","aria-hidden":"true",onClick:t[9]||(t[9]=s=>G())}," Sim ")])]),_:1}),C(U,{id:"advanced-search","class-name":"modal-dialog w-100 ms-auto mt-6 me-4 d-flex flex-column"},{default:f(()=>[e("div",vs,[ms,e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close","aria-hidden":"true",onClick:t[10]||(t[10]=s=>a.value=r(j))})]),e("div",null,[e("div",ps,[bs,_(e("select",{id:"distance_range_id","onUpdate:modelValue":t[11]||(t[11]=s=>a.value.distance_range_id=s),class:"form-select border-gray-500"},[(o(!0),i(v,null,p(r(h).distanceRanges,(s,c)=>(o(),i("option",{key:c,value:s.id},n(s.name),9,hs))),128))],512),[[x,a.value.distance_range_id]])]),e("div",fs,[ys,_(e("select",{id:"time_experience","onUpdate:modelValue":t[12]||(t[12]=s=>a.value.time_experience=s),class:"form-select border-gray-500"},[(o(!0),i(v,null,p(r(h).timesExperience,(s,c)=>(o(),i("option",{key:c,value:s.id},n(s.name),9,gs))),128))],512),[[x,a.value.time_experience]])]),e("div",ks,[xs,_(e("select",{id:"age","onUpdate:modelValue":t[13]||(t[13]=s=>a.value.age=s),class:"form-select border-gray-500"},[(o(!0),i(v,null,p(r(h).ages,(s,c)=>(o(),i("option",{key:c,value:s.id},n(s.name),9,Cs))),128))],512),[[x,a.value.age]])]),e("div",Ss,[ws,_(e("select",{id:"educational_level_id","onUpdate:modelValue":t[14]||(t[14]=s=>a.value.time_experience=s),class:"form-select border-gray-500"},[(o(!0),i(v,null,p(r(h).educationalLevels,(s,c)=>(o(),i("option",{key:c,value:s.id},n(s.name),9,$s))),128))],512),[[x,a.value.time_experience]])]),e("div",Ns,[Vs,_(e("select",{id:"type_license_drive_id","onUpdate:modelValue":t[15]||(t[15]=s=>a.value.type_license_drive_id=s),class:"form-select border-gray-500"},[(o(!0),i(v,null,p(r(h).typeLicenseDrives,(s,c)=>(o(),i("option",{key:c,value:s.id},n(s.name),9,Es))),128))],512),[[x,a.value.type_license_drive_id]])]),e("div",Os,[Ds,_(e("select",{id:"type_vehicle_id","onUpdate:modelValue":t[16]||(t[16]=s=>a.value.type_vehicle_id=s),class:"form-select border-gray-500"},[(o(!0),i(v,null,p(r(h).typeVehicles,(s,c)=>(o(),i("option",{key:c,value:s.id},n(s.name),9,Us))),128))],512),[[x,a.value.type_vehicle_id]])])]),e("div",qs,[e("button",{type:"submit",form:"advanced-search-form","aria-label":"Close","aria-hidden":"true","data-bs-dismiss":"modal",class:"btn w-100 bg-orange fs-4 py-1 px-4 border-0",onClick:t[17]||(t[17]=s=>O())}," Pesquisar ")])]),_:1}),$.value?(o(),i("div",As,[C(K,{errors:r(E),onClick:t[18]||(t[18]=s=>$.value=!1)},null,8,["errors"])])):N("",!0)],64)}}};export{Ps as default};
